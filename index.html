<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Q&A Checker</title>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .container { max-width: 900px; margin: auto; }
    #preview { max-width: 100%; margin-top: 10px; border: 1px solid #ccc; }
    .qa-block { margin-top: 20px; padding: 15px; border: 1px solid #333; border-radius: 8px; }
    .error { color: red; font-weight: bold; }
    .suggestion { color: green; }
    pre { background: #f4f4f4; padding: 10px; border-radius: 5px; white-space: pre-wrap; }
  </style>
</head>
<body>
<div class="container">
  <h2>AI Question & Answer Checker</h2>
  <p>Upload an image containing questions and answers. The system will extract and check only the answers for grammar & spelling mistakes.</p>
  
  <input type="file" id="fileInput" accept="image/*">
  <br><br>
  <img id="preview" src="" alt="Preview" hidden>
  
  <div id="status"></div>
  <div id="qaContainer"></div>
</div>

<script>
const fileInput = document.getElementById("fileInput");
const preview = document.getElementById("preview");
const status = document.getElementById("status");
const qaContainer = document.getElementById("qaContainer");

// Detect Q/A using regex patterns
function splitQA(text) {
  const lines = text.split(/\n+/).map(l => l.trim()).filter(Boolean);
  const qaPairs = [];
  let currentQ = "", currentA = "";

  lines.forEach(line => {
    if (/^(Q|Q\d+|Question)/i.test(line)) {
      // Save previous QA if any
      if (currentQ || currentA) {
        qaPairs.push({question: currentQ, answer: currentA});
        currentQ = ""; currentA = "";
      }
      currentQ = line.replace(/^(Q\d*[:.]?|Question[:.]?)/i, "").trim();
    } else if (/^(A|Ans|Answer)/i.test(line)) {
      currentA = line.replace(/^(A|Ans|Answer)[:.]?/i, "").trim();
    } else {
      if (currentA) {
        currentA += " " + line;
      } else if (currentQ) {
        currentQ += " " + line;
      }
    }
  });

  if (currentQ || currentA) {
    qaPairs.push({question: currentQ, answer: currentA});
  }
  return qaPairs;
}

// Main workflow
fileInput.addEventListener("change", async () => {
  const file = fileInput.files[0];
  if (!file) return;
  
  preview.src = URL.createObjectURL(file);
  preview.hidden = false;
  status.innerText = "Extracting text with OCR...";
  qaContainer.innerHTML = "";

  // OCR
  const result = await Tesseract.recognize(file, 'eng');
  const extractedText = result.data.text.trim();

  const qaPairs = splitQA(extractedText);
  status.innerText = "Checking answers for grammar & spelling...";

  for (const [index, qa] of qaPairs.entries()) {
    const response = await fetch("https://api.languagetool.org/v2/check", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({
        text: qa.answer,
        language: "en-US"
      })
    });
    const data = await response.json();

    const block = document.createElement("div");
    block.classList.add("qa-block");
    block.innerHTML = `
      <h3>Q${index + 1}:</h3>
      <pre>${qa.question || "(not detected)"}</pre>
      <h4>Answer (before correction):</h4>
      <pre>${qa.answer || "(not detected)"}</pre>
      <h4>Errors & Suggestions:</h4>
      <ul>
        ${
            data.matches.map(match => {
  const suggestion = match.replacements.length > 0 ? match.replacements[0].value : "No suggestion";
  return `<li><span class="error">${match.context.text}</span> â†’ 
          <span class="suggestion">${suggestion}</span></li>`;
}).join("")

        }
      </ul>
    `;
    qaContainer.appendChild(block);
  }

  status.innerText = "";
});
</script>
</body>
</html>
TOOL.html
Displaying TOOL.html.
